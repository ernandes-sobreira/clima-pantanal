<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pantanal Clima ‚Äî S√©ries, Compara√ß√µes e Tend√™ncias</title>
  <meta name="description" content="Plataforma interativa para explorar s√©ries clim√°ticas do Pantanal: compara√ß√£o entre munic√≠pios, planalto/plan√≠cie, estat√≠sticas descritivas e testes de tend√™ncia." />
  <link rel="stylesheet" href="styles.css" />
  <!-- Plotly for charts -->
  <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
  <!-- PapaParse for CSV parsing -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">üå¶Ô∏è</div>
      <div>
        <div class="title">Pantanal Clima</div>
        <div class="subtitle">S√©ries temporais ¬∑ Compara√ß√µes ¬∑ Tend√™ncias ¬∑ Estat√≠stica</div>
      </div>
    </div>
    <div class="top-actions">
      <button id="btnShare" class="btn ghost" title="Copiar link com filtros">Compartilhar</button>
      <button id="btnExport" class="btn" title="Exportar dados filtrados">Exportar CSV</button>
    </div>
  </header>

  <main class="wrap">
    <section class="panel">
      <div class="panel-title">1) Filtros</div>

      <div class="grid">
        <div class="field">
          <label>Recorte</label>
          <div class="seg" role="tablist" aria-label="Recorte">
            <button class="segbtn active" data-scope="mun">Munic√≠pios</button>
            <button class="segbtn" data-scope="loc">Planalto vs Plan√≠cie</button>
            <button class="segbtn" data-scope="agg">Agregado (sele√ß√£o)</button>
          </div>
          <div class="hint">‚ÄúAgregado‚Äù calcula estat√≠sticas sobre a sele√ß√£o (ex: m√©dia entre munic√≠pios).</div>
        </div>

        <div class="field">
          <label>Munic√≠pios</label>
          <select id="selMun" multiple size="8"></select>
          <div class="hint">Dica: use <kbd>Ctrl</kbd>/<kbd>Cmd</kbd> para m√∫ltiplos.</div>
        </div>

        <div class="field">
          <label>Planalto/Plan√≠cie</label>
          <select id="selLoc" multiple size="4">
            <option value="PLANALTO">PLANALTO</option>
            <option value="PLAN√çCIE">PLAN√çCIE</option>
          </select>
          <div class="hint">Funciona melhor no modo ‚ÄúPlanalto vs Plan√≠cie‚Äù.</div>
        </div>

        <div class="field">
          <label>Vari√°vel (Y)</label>
          <select id="selVar"></select>
          <div class="hint">Voc√™ pode comparar duas vari√°veis na aba ‚ÄúComparar‚Äù.</div>
        </div>

        <div class="field">
          <label>Agrega√ß√£o</label>
          <select id="selAgg">
            <option value="monthly">Mensal</option>
            <option value="annual">Anual</option>
          </select>
          <div class="hint">A base original j√° √© mensal (ym). ‚ÄúAnual‚Äù agrega por ano.</div>
        </div>

        <div class="field">
          <label>Per√≠odo</label>
          <div class="row">
            <select id="selStart"></select>
            <span class="sep">‚Üí</span>
            <select id="selEnd"></select>
          </div>
          <div class="hint">Ajuste o per√≠odo para focar tend√™ncias.</div>
        </div>

        <div class="field">
          <label>Suaviza√ß√£o</label>
          <select id="selSmooth">
            <option value="none">Sem</option>
            <option value="3">M√©dia m√≥vel 3</option>
            <option value="6">M√©dia m√≥vel 6</option>
            <option value="12">M√©dia m√≥vel 12</option>
          </select>
          <div class="hint">M√©dia m√≥vel simples (aplicada ap√≥s a agrega√ß√£o).</div>
        </div>

        <div class="field">
          <label>Mostrar bandas</label>
          <div class="checks">
            <label><input type="checkbox" id="chkMinMax" checked /> min‚Äìmax</label>
            <label><input type="checkbox" id="chkStd" /> ¬±1 desvio padr√£o</label>
            <label><input type="checkbox" id="chkMeanLine" checked /> m√©dia</label>
          </div>
          <div class="hint">Bandas s√£o calculadas sobre a sele√ß√£o (munic√≠pios/loc).</div>
        </div>
      </div>

      <div class="panel-actions">
        <button id="btnUpdate" class="btn">Atualizar</button>
        <button id="btnReset" class="btn ghost">Reset</button>
      </div>
    </section>

    <section class="panel">
      <div class="panel-title">2) S√©ries temporais</div>
      <div id="chartTS" class="chart"></div>

      <div class="cards">
        <div class="card">
          <div class="card-h">Resumo (sele√ß√£o)</div>
          <div id="boxSummary" class="mono small"></div>
        </div>
        <div class="card">
          <div class="card-h">Tend√™ncia (robusta)</div>
          <div id="boxTrend" class="mono small"></div>
          <div class="small note">
            Teste de Mann‚ÄìKendall (tau e p), inclina√ß√£o de Sen, regress√£o linear (inclina√ß√£o e R¬≤).
          </div>
        </div>
      </div>
    </section>

    <section class="panel">
      <div class="panel-title">3) Comparar vari√°veis</div>

      <div class="grid2">
        <div class="field">
          <label>X</label>
          <select id="selX"></select>
        </div>
        <div class="field">
          <label>Y</label>
          <select id="selY"></select>
        </div>
        <div class="field">
          <label>Tipo</label>
          <select id="selCmp">
            <option value="scatter">Dispers√£o</option>
            <option value="corr">Matriz de correla√ß√£o</option>
          </select>
        </div>
        <div class="field">
          <label>Correla√ß√£o</label>
          <select id="selCorr">
            <option value="pearson">Pearson</option>
            <option value="spearman">Spearman</option>
          </select>
        </div>
      </div>

      <div id="chartCMP" class="chart"></div>
      <div id="boxCmpStats" class="mono small"></div>
    </section>

    <footer class="footer">
      <div>
        Feito para GitHub Pages (est√°tico). Carrega o CSV localmente e roda tudo no navegador.
        <span class="muted">Dica: se o CSV crescer muito, a gente migra para ‚Äútiles‚Äù/parquet + WASM.</span>
      </div>
    </footer>
  </main>

  <div id="toast" class="toast" aria-live="polite"></div>
  <script src="app.js"></script>
  <section id="sobre" class="about-section">
  <h2>Sobre a plataforma</h2>

  <p class="about-text">
    A plataforma <strong>Pantanal Clima</strong> foi organizada e desenvolvida por 
    <strong>Ernandes Sobreira</strong> para fins de 
    <strong>ensino, pesquisa, extens√£o, inova√ß√£o</strong> e 
    <strong>consulta p√∫blica de dados clim√°ticos</strong>.
  </p>

  <p class="about-text">
    Os dados clim√°ticos apresentados foram extra√≠dos por meio do 
    <strong>Google Earth Engine</strong>, a partir de produtos de sensoriamento remoto
    e bases p√∫blicas de dados clim√°ticos, posteriormente organizados e analisados.
  </p>
</section>

</body>
</html>
